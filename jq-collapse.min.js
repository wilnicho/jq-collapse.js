/**
 * 
 * jq-collapse v0.5
 *
 * https://github.com/wilnicho/jq-collapse.js
 * 
 * copyright (c) 2020 wilfredo nina choquetarqui
 * 
 */

"use strict";jQuery.fn.extend({jq_collapse:function(t){let e=$(window),a=$(document),i=$(this),s={type:"vertical",time:.5,size:"auto",slide:!1,fade:!1,save:!1,storage:"session",responsive:!0,media:768};const o=function(t){return!0===t||"true"===t},r=function(t){return t.type=$.inArray(t.type,["horizontal","vertical"])>=0?t.type:s.type,t.time=$.isNumeric(t.time)?parseFloat(t.time):s.time,t.size=$.isNumeric(t.size)?parseInt(t.size):s.size,t.slide=$.inArray(t.slide,[!0,!1,"true","false"])>=0?o(t.slide):s.slide,t.fade=$.inArray(t.fade,[!0,!1,"true","false"])>=0?o(t.fade):s.fade,t.save=$.inArray(t.save,[!0,!1,"true","false"])>=0?o(t.save):s.save,t.storage=$.inArray(t.storage,["session","local"])>=0?t.storage:s.storage,t.responsive=$.inArray(t.responsive,[!0,!1,"true","false"])>=0?o(t.responsive):s.responsive,t.media=$.isNumeric(t.media)?parseInt(t.media):s.media,t},l=function(e){let a,i,s,o,l,n,c,d,p;return a=$.trim(e.attr("data-jqcollapse-type")),i=$.trim(e.attr("data-jqcollapse-time")),s=$.trim(e.attr("data-jqcollapse-size")),o=$.trim(e.attr("data-jqcollapse-slide")),l=$.trim(e.attr("data-jqcollapse-fade")),n=$.trim(e.attr("data-jqcollapse-save")),c=$.trim(e.attr("data-jqcollapse-storage")),d=$.trim(e.attr("data-jqcollapse-responsive")),p=$.trim(e.attr("data-jqcollapse-media")),r({type:a||t.type,time:i||t.time,size:s||t.size,slide:o||t.slide,fade:l||t.fade,save:n||t.save,storage:c||t.storage,responsive:d||t.responsive,media:p||t.media})};t=$.extend({},s,t),t=r(t),e.on("resize",function(){i.each(function(){let t=$(this),e=$('[data-jqcollapse-reaction="'+$.trim(t.attr("data-jqcollapse-action"))+'"]'),i=l(t);"vertical"==i.type?e.css("height",a.outerWidth()<i.media&&i.responsive?"auto":i.size):e.css("width",a.outerWidth()<i.media&&i.responsive?"auto":i.size)})}).trigger("resize"),i.each(function(){let t,e=$(this),i=$('[data-jqcollapse-reaction="'+$.trim(e.attr("data-jqcollapse-action"))+'"]'),s=l(e);s.save&&"hide"==("session"==s.storage?sessionStorage.getItem("jqcollapse"+window.location.pathname+$.trim(e.attr("data-jqcollapse-action"))):localStorage.getItem("jqcollapse"+window.location.pathname+$.trim(e.attr("data-jqcollapse-action"))))?(e.attr("data-jqcollapse-state","hide"),t=s.fade?0:1,a.outerWidth()<s.media&&s.responsive?i.stop().animate({height:"toggle",opacity:t},0):"vertical"==s.type?i.stop().animate({height:"toggle",opacity:t},0):i.stop().animate({width:"toggle",opacity:t},0)):e.attr("data-jqcollapse-state","show")}),i.on("click",function(t){let e,i=$(this),s=$('[data-jqcollapse-reaction="'+$.trim(i.attr("data-jqcollapse-action"))+'"]'),o=l(i);t.preventDefault(),e="vertical"==o.type?{height:"toggle"}:a.outerWidth()<o.media&&o.responsive?{height:"toggle"}:{width:"toggle"},o.time=o.slide?o.time:0,"show"==i.attr("data-jqcollapse-state")?(i.attr("data-jqcollapse-state","hide"),e.opacity=o.fade?0:1,i.trigger("hide.jq.collapse",[s]),s.stop().animate(e,1e3*o.time,function(){s.scrollTop(0),i.trigger("hidden.jq.collapse",[$(this)])})):(i.attr("data-jqcollapse-state","show"),e.opacity=1,i.trigger("show.jq.collapse",[s]),s.stop().animate(e,1e3*o.time,function(){s.scrollTop(0),i.trigger("shown.jq.collapse",[$(this)])})),o.save&&("session"==o.storage?sessionStorage.setItem("jqcollapse"+window.location.pathname+$.trim(i.attr("data-jqcollapse-action")),i.attr("data-jqcollapse-state")):localStorage.setItem("jqcollapse"+window.location.pathname+$.trim(i.attr("data-jqcollapse-action")),i.attr("data-jqcollapse-state")))})}});